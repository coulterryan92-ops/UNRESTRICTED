import React, { useState } from 'react';

export default function App() {
  const [activeTab, setActiveTab] = useState('Home');
  const [query, setQuery] = useState("");
  const [dailyLog, setDailyLog] = useState([]);
  const [status, setStatus] = useState('idle');

  // ... Your existing handleSearch and findNutrient logic remains here ...

  const renderContent = () => {
    switch (activeTab) {
      case 'Home':
        return <div><h3>Saved Recipes</h3><p>Your favorite home-cooked meals go here.</p></div>;
      case 'On the Go':
        return <div><h3>Takeout & Restaurants</h3><p>Saved meals from your favorite spots.</p></div>;
      case 'Calendar':
        return (
          <div>
            <h3>Food Journal</h3>
            {/* Your existing Log Section code */}
            {dailyLog.map((item) => (
              <div key={item.id}>{item.name} - {item.calories} kcal</div>
            ))}
            {dailyLog.length === 0 && <p>Nothing logged yet.</p>}
          </div>
        );
      case 'Macro':
        return <div><h3>Macro AI</h3><p>Ask me anything or send a meal plan to your calendar.</p></div>;
      default:
        return null;
    }
  };

  return (
    <div style={{ paddingBottom: '70px', fontFamily: 'sans-serif' }}>
      <h1>Unrestricted</h1>
      
      {/* Search remains accessible or can be moved into specific tabs */}
      <input value={query} onChange={(e) => setQuery(e.target.value)} placeholder="Search USDA database..." />
      <button onClick={handleSearch}>{status === 'loading' ? '...' : 'Add'}</button>

      <hr />
      
      {renderContent()}

      {/* Bottom Navigation Bar */}
      <nav style={navStyle}>
        <button onClick={() => setActiveTab('Home')} style={btnStyle}>Home</button>
        <button onClick={() => setActiveTab('On the Go')} style={btnStyle}>On the Go</button>
        <button onClick={() => setActiveTab('Calendar')} style={btnStyle}>Calendar</button>
        <button onClick={() => setActiveTab('Macro')} style={btnStyle}>Macro</button>
      </nav>
    </div>
  );
}

const navStyle = {
  position: 'fixed',
  bottom: 0,
  left: 0,
  right: 0,
  height: '60px',
  display: 'flex',
  justifyContent: 'space-around',
  alignItems: 'center',
  background: '#f8f8f8',
  borderTop: '1px solid #ddd'
};

const btnStyle = {
  background: 'none',
  border: 'none',
  fontSize: '12px',
  cursor: 'pointer'
};
